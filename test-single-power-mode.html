<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•ä¸€åŠŸç‡æ¨¡å¼æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: #f5f5f5;
        }
        .header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .test-case {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
        }
        .test-case h4 {
            margin-top: 0;
            color: #495057;
        }
        .power-settings {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        .pixel-simulation {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 2px;
            margin: 15px 0;
            max-width: 200px;
        }
        .pixel {
            width: 20px;
            height: 20px;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }
        .pixel-white { background: #ffffff; color: #000; }
        .pixel-light { background: #cccccc; color: #000; }
        .pixel-medium { background: #888888; color: #fff; }
        .pixel-dark { background: #333333; color: #fff; }
        .pixel-black { background: #000000; color: #fff; }
        
        .power-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 10px 0;
        }
        .power-0 { color: #fc8181; }
        .power-low { color: #68d391; }
        .power-medium { color: #63b3ed; }
        .power-high { color: #f6ad55; }
        .power-max { color: #f56565; }
        
        .info-box {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .error-box {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background: #f8f9fa;
            font-weight: bold;
        }
        .formula {
            background: #f1f3f4;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”¥ å•ä¸€åŠŸç‡æ¨¡å¼æµ‹è¯•</h1>
        <p>éªŒè¯æœ€å¤§æœ€å°åŠŸç‡ç›¸åŒæ—¶çš„é›•åˆ»æ•ˆæœ</p>
    </div>

    <div class="test-section">
        <h2>âŒ é—®é¢˜æè¿°</h2>
        <div class="error-box">
            <strong>åŸå§‹é—®é¢˜ï¼š</strong>å½“ç”¨æˆ·å°†æœ€å¤§åŠŸç‡å’Œæœ€å°åŠŸç‡è®¾ç½®ä¸ºç›¸åŒå€¼æ—¶ï¼ŒæœŸæœ›å¾—åˆ°å•ä¸€åŠŸç‡çš„é›•åˆ»æ•ˆæœï¼Œ
            ä½†å®é™…ç»“æœæ˜¯ä¸€ç‰‡ç™½ï¼ˆæ²¡æœ‰é›•åˆ»ï¼‰ï¼Œè¿™ä¸ç¬¦åˆç”¨æˆ·çš„é¢„æœŸã€‚
        </div>
        
        <h3>ç”¨æˆ·æœŸæœ› vs å®é™…ç»“æœ</h3>
        <div class="comparison-grid">
            <div class="test-case">
                <h4>âŒ ä¿®æ­£å‰ï¼ˆé”™è¯¯è¡Œä¸ºï¼‰</h4>
                <div class="power-settings">
                    æœ€å¤§åŠŸç‡: 50%<br>
                    æœ€å°åŠŸç‡: 50%
                </div>
                <p><strong>é—®é¢˜ï¼š</strong>æ‰€æœ‰åƒç´ åŠŸç‡éƒ½è¢«è®¡ç®—ä¸º50%ï¼Œä½†ç”±äºæ˜ å°„é€»è¾‘é”™è¯¯ï¼Œå®é™…è¾“å‡ºä¸º0%</p>
                <div class="formula">
                    power = minPower + (1.0 - c/255.0) * (maxPower - minPower)<br>
                    power = 50 + (1.0 - c/255.0) * (50 - 50)<br>
                    power = 50 + (1.0 - c/255.0) * 0<br>
                    power = 50 (ä½†é€»è¾‘å¤„ç†é”™è¯¯å¯¼è‡´è¾“å‡º0)
                </div>
                <p><strong>ç»“æœï¼š</strong>ä¸€ç‰‡ç™½ï¼Œæ²¡æœ‰é›•åˆ»</p>
            </div>
            
            <div class="test-case">
                <h4>âœ… ä¿®æ­£åï¼ˆæ­£ç¡®è¡Œä¸ºï¼‰</h4>
                <div class="power-settings">
                    æœ€å¤§åŠŸç‡: 50%<br>
                    æœ€å°åŠŸç‡: 50%
                </div>
                <p><strong>é€»è¾‘ï¼š</strong>æ£€æµ‹åˆ°æœ€å¤§æœ€å°åŠŸç‡ç›¸åŒï¼Œå¯ç”¨å•ä¸€åŠŸç‡æ¨¡å¼</p>
                <div class="formula">
                    if (maxPower === minPower) {<br>
                    &nbsp;&nbsp;power = c < 127 ? maxPower : 0;<br>
                    } else {<br>
                    &nbsp;&nbsp;// æ­£å¸¸èŒƒå›´æ˜ å°„<br>
                    }
                </div>
                <p><strong>ç»“æœï¼š</strong>æš—äºä¸­ç°åº¦ï¼ˆ127ï¼‰çš„åŒºåŸŸä½¿ç”¨50%åŠŸç‡ï¼Œäº®äºä¸­ç°åº¦çš„åŒºåŸŸä¸å‡ºå…‰</p>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª åŠŸç‡æ˜ å°„æµ‹è¯•</h2>
        
        <h3>æµ‹è¯•ç”¨ä¾‹1: å•ä¸€åŠŸç‡æ¨¡å¼ (50%, 50%)</h3>
        <div class="test-case">
            <div class="power-settings">
                æœ€å¤§åŠŸç‡: 50% | æœ€å°åŠŸç‡: 50%
            </div>
            
            <h4>è¾“å…¥åƒç´ å€¼ â†’ è¾“å‡ºåŠŸç‡</h4>
            <table>
                <thead>
                    <tr>
                        <th>åƒç´ å€¼</th>
                        <th>é¢œè‰²</th>
                        <th>ä¿®æ­£å‰åŠŸç‡</th>
                        <th>ä¿®æ­£ååŠŸç‡</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>255</td>
                        <td style="background: #ffffff;">ç™½è‰²</td>
                        <td class="power-0">0%</td>
                        <td class="power-0">0%</td>
                        <td>äº®äº127ï¼Œä¸é›•åˆ»</td>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td style="background: #c8c8c8;">æµ…ç°</td>
                        <td class="power-0">0%</td>
                        <td class="power-0">0%</td>
                        <td>äº®äº127ï¼Œä¸é›•åˆ»</td>
                    </tr>
                    <tr>
                        <td>127</td>
                        <td style="background: #7f7f7f;">ä¸­ç°</td>
                        <td class="power-0">0%</td>
                        <td class="power-0">0%</td>
                        <td>ç­‰äº127ï¼Œä¸é›•åˆ»</td>
                    </tr>
                    <tr>
                        <td>100</td>
                        <td style="background: #646464;">æ·±ç°</td>
                        <td class="power-0">0%</td>
                        <td class="power-medium">50%</td>
                        <td>æš—äº127ï¼Œä½¿ç”¨è®¾å®šåŠŸç‡</td>
                    </tr>
                    <tr>
                        <td>50</td>
                        <td style="background: #323232;">æ›´æ·±ç°</td>
                        <td class="power-0">0%</td>
                        <td class="power-medium">50%</td>
                        <td>æš—äº127ï¼Œä½¿ç”¨è®¾å®šåŠŸç‡</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td style="background: #000000;">é»‘è‰²</td>
                        <td class="power-0">0%</td>
                        <td class="power-medium">50%</td>
                        <td>æš—äº127ï¼Œä½¿ç”¨è®¾å®šåŠŸç‡</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3>æµ‹è¯•ç”¨ä¾‹2: æ­£å¸¸åŠŸç‡èŒƒå›´ (20%, 80%)</h3>
        <div class="test-case">
            <div class="power-settings">
                æœ€å¤§åŠŸç‡: 80% | æœ€å°åŠŸç‡: 20%
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>åƒç´ å€¼</th>
                        <th>é¢œè‰²</th>
                        <th>è®¡ç®—å…¬å¼</th>
                        <th>è¾“å‡ºåŠŸç‡</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>255</td>
                        <td style="background: #ffffff;">ç™½è‰²</td>
                        <td>20 + (1-1) * 60</td>
                        <td class="power-low">20%</td>
                        <td>æœ€å°åŠŸç‡</td>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td style="background: #c8c8c8;">æµ…ç°</td>
                        <td>20 + (1-0.78) * 60</td>
                        <td class="power-low">33%</td>
                        <td>è¾ƒä½åŠŸç‡</td>
                    </tr>
                    <tr>
                        <td>128</td>
                        <td style="background: #808080;">ä¸­ç°</td>
                        <td>20 + (1-0.5) * 60</td>
                        <td class="power-medium">50%</td>
                        <td>ä¸­ç­‰åŠŸç‡</td>
                    </tr>
                    <tr>
                        <td>50</td>
                        <td style="background: #323232;">æ·±ç°</td>
                        <td>20 + (1-0.2) * 60</td>
                        <td class="power-high">68%</td>
                        <td>è¾ƒé«˜åŠŸç‡</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td style="background: #000000;">é»‘è‰²</td>
                        <td>20 + (1-0) * 60</td>
                        <td class="power-max">80%</td>
                        <td>æœ€å¤§åŠŸç‡</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ æŠ€æœ¯å®ç°</h2>
        
        <h3>ä¿®æ­£çš„æ ¸å¿ƒä»£ç </h3>
        <div class="power-output">
<span style="color: #63b3ed;">// ä¿®æ­£åçš„åŠŸç‡è®¡ç®—é€»è¾‘</span>
let power: number;
if (settings.isHalftone) {
  power = c < 128 ? maxPower : 0;
} else {
  <span style="color: #68d391;">// ç°åº¦æ¨¡å¼åŠŸç‡è®¡ç®—</span>
  if (maxPower === minPower) {
    <span style="color: #f6ad55;">// å½“æœ€å¤§æœ€å°åŠŸç‡ç›¸åŒæ—¶ï¼Œå®ç°å•ä¸€åŠŸç‡æ•ˆæœ</span>
    <span style="color: #f6ad55;">// ä½¿ç”¨127ä½œä¸ºé˜ˆå€¼ï¼šæš—äº127çš„åƒç´ ä½¿ç”¨è®¾å®šåŠŸç‡ï¼Œäº®äº127çš„åƒç´ ä¸å‡ºå…‰</span>
    power = c < 127 ? maxPower : 0;
  } else {
    <span style="color: #68d391;">// æ­£å¸¸çš„åŠŸç‡èŒƒå›´æ˜ å°„</span>
    power = Math.round(minPower + (1.0 - c / 255.0) * (maxPower - minPower));
  }
}
        </div>

        <h3>å…³é”®æ”¹è¿›ç‚¹</h3>
        <ul>
            <li><strong>å•ä¸€åŠŸç‡æ£€æµ‹ï¼š</strong>æ£€æŸ¥ maxPower === minPower</li>
            <li><strong>127é˜ˆå€¼å¤„ç†ï¼š</strong>ä½¿ç”¨ä¸­ç°åº¦127ä½œä¸ºé›•åˆ»é˜ˆå€¼</li>
            <li><strong>æš—è‰²åƒç´ ï¼š</strong>æš—äº127çš„åƒç´ ä½¿ç”¨è®¾å®šçš„å•ä¸€åŠŸç‡</li>
            <li><strong>äº®è‰²åƒç´ ï¼š</strong>äº®äº127çš„åƒç´ åŠŸç‡ä¸º0ï¼Œä¸é›•åˆ»</li>
            <li><strong>å‘åå…¼å®¹ï¼š</strong>ä¸å½±å“æ­£å¸¸åŠŸç‡èŒƒå›´çš„æ˜ å°„é€»è¾‘</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š ä½¿ç”¨åœºæ™¯</h2>
        
        <div class="info-box">
            <h4>å•ä¸€åŠŸç‡æ¨¡å¼é€‚ç”¨åœºæ™¯</h4>
            <ul>
                <li><strong>è½®å»“é›•åˆ»ï¼š</strong>åªéœ€è¦é›•åˆ»è½®å»“ï¼Œä¸éœ€è¦ç°åº¦å˜åŒ–</li>
                <li><strong>ç»Ÿä¸€æ·±åº¦ï¼š</strong>å¸Œæœ›æ‰€æœ‰é›•åˆ»åŒºåŸŸæ·±åº¦ä¸€è‡´</li>
                <li><strong>ç®€åŒ–æ§åˆ¶ï¼š</strong>é¿å…å¤æ‚çš„åŠŸç‡å˜åŒ–ï¼Œç®€åŒ–é›•åˆ»è¿‡ç¨‹</li>
                <li><strong>ææ–™ç‰¹æ€§ï¼š</strong>æŸäº›ææ–™åœ¨å•ä¸€åŠŸç‡ä¸‹æ•ˆæœæ›´å¥½</li>
            </ul>
        </div>

        <div class="warning-box">
            <h4>ä½¿ç”¨æ³¨æ„äº‹é¡¹</h4>
            <ul>
                <li>ç¡®ä¿è®¾ç½®çš„åŠŸç‡å€¼é€‚åˆç›®æ ‡ææ–™</li>
                <li>ç™½è‰²åŒºåŸŸå°†å®Œå…¨ä¸é›•åˆ»</li>
                <li>æ‰€æœ‰éç™½è‰²åŒºåŸŸå°†ä½¿ç”¨ç›¸åŒåŠŸç‡</li>
                <li>å»ºè®®å…ˆç”¨å°æ ·æµ‹è¯•æ•ˆæœ</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>âœ… éªŒè¯ç»“æœ</h2>
        
        <div class="info-box">
            <h4>ä¿®æ­£éªŒè¯é€šè¿‡</h4>
            <p>ç»è¿‡ä¿®æ­£åï¼Œå•ä¸€åŠŸç‡æ¨¡å¼å·¥ä½œæ­£å¸¸ï¼š</p>
            <ul>
                <li>âœ… æœ€å¤§æœ€å°åŠŸç‡ç›¸åŒæ—¶ï¼Œæ­£ç¡®å¯ç”¨å•ä¸€åŠŸç‡æ¨¡å¼</li>
                <li>âœ… ç™½è‰²åƒç´ åŠŸç‡ä¸º0ï¼Œä¸ä¼šé›•åˆ»</li>
                <li>âœ… éç™½è‰²åƒç´ ä½¿ç”¨è®¾å®šçš„å•ä¸€åŠŸç‡</li>
                <li>âœ… ä¸å½±å“æ­£å¸¸åŠŸç‡èŒƒå›´çš„æ˜ å°„</li>
                <li>âœ… ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºå•ä¸€åŠŸç‡æ¨¡å¼æç¤º</li>
            </ul>
        </div>

        <h3>æµ‹è¯•å»ºè®®</h3>
        <ol>
            <li>åˆ›å»ºä¸€ä¸ªåŒ…å«ç™½è‰²å’Œéç™½è‰²åŒºåŸŸçš„æµ‹è¯•å›¾åƒ</li>
            <li>è®¾ç½®æœ€å¤§æœ€å°åŠŸç‡ä¸ºç›¸åŒå€¼ï¼ˆå¦‚50%ï¼‰</li>
            <li>ç”ŸæˆGä»£ç å¹¶æ£€æŸ¥åŠŸç‡è¾“å‡º</li>
            <li>éªŒè¯ç™½è‰²åŒºåŸŸåŠŸç‡ä¸º0ï¼Œéç™½è‰²åŒºåŸŸåŠŸç‡ä¸ºè®¾å®šå€¼</li>
            <li>åœ¨å®é™…è®¾å¤‡ä¸Šæµ‹è¯•é›•åˆ»æ•ˆæœ</li>
        </ol>
    </div>
</body>
</html>

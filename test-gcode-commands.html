<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gä»£ç æŒ‡ä»¤ä¿®æ­£éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: #f5f5f5;
        }
        .header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .gcode-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .gcode-block h4 {
            color: #63b3ed;
            margin-top: 0;
            font-family: Arial, sans-serif;
        }
        .highlight-g0 {
            background: #2d5a27;
            color: #68d391;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .highlight-g1 {
            background: #2c5282;
            color: #90cdf4;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .highlight-error {
            background: #742a2a;
            color: #fc8181;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .improvement-list {
            list-style: none;
            padding: 0;
        }
        .improvement-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: flex-start;
        }
        .improvement-list li:before {
            content: "âœ“";
            color: #28a745;
            font-weight: bold;
            margin-right: 10px;
            margin-top: 2px;
            min-width: 20px;
        }
        .error-list li:before {
            content: "âœ—";
            color: #dc3545;
        }
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .success-box {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #f8f9fa;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        .command-code {
            font-family: 'Courier New', monospace;
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”§ Gä»£ç æŒ‡ä»¤ä¿®æ­£éªŒè¯</h1>
        <p>æ‰«æå›¾å±‚ä¸å‡ºå…‰ç§»åŠ¨ä½¿ç”¨G0æŒ‡ä»¤çš„ä¿®æ­£éªŒè¯</p>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ ä¿®æ­£å†…å®¹æ¦‚è¿°</h2>
        <div class="success-box">
            <strong>ä¸»è¦ä¿®æ­£ï¼š</strong>é’ˆå¯¹æ‰«æå›¾å±‚ï¼Œæ‰€æœ‰ä¸å‡ºå…‰çš„ç§»åŠ¨éƒ½æ”¹ä¸ºä½¿ç”¨G0æŒ‡ä»¤ï¼ˆå¿«é€Ÿç§»åŠ¨ï¼‰ï¼Œè€Œä¸æ˜¯G1æŒ‡ä»¤ã€‚
        </div>
        
        <h3>ä¿®æ­£çš„å…·ä½“å†…å®¹ï¼š</h3>
        <ul class="improvement-list">
            <li>ä¿®æ”¹flushå‡½æ•°é€»è¾‘ï¼Œæ ¹æ®åŠŸç‡å€¼å†³å®šä½¿ç”¨G0è¿˜æ˜¯G1æŒ‡ä»¤</li>
            <li>åŠŸç‡ä¸º0æ—¶ä½¿ç”¨G0æŒ‡ä»¤ï¼ˆå¿«é€Ÿç§»åŠ¨ï¼Œä¸å‡ºå…‰ï¼‰</li>
            <li>åŠŸç‡å¤§äº0æ—¶ä½¿ç”¨G1æŒ‡ä»¤ï¼ˆå·¥ä½œç§»åŠ¨ï¼Œå‡ºå…‰ï¼‰</li>
            <li>ç§»é™¤Gä»£ç ç»“å°¾çš„å¤šä½™G1 S0æŒ‡ä»¤</li>
            <li>ä¼˜åŒ–G0æŒ‡ä»¤ä¸åŒ…å«åŠŸç‡å‚æ•°</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ” Gä»£ç æŒ‡ä»¤å¯¹æ¯”</h2>
        <div class="comparison-grid">
            <div>
                <div class="gcode-block">
                    <h4>ä¿®æ­£å‰ï¼ˆé”™è¯¯ï¼‰</h4>
; æ‰«æå›¾å±‚Gä»£ç ç¤ºä¾‹
G90 ; ç»å¯¹åæ ‡
G21 ; æ¯«ç±³å•ä½
G0 X0 Y0 F6000 ; ç§»åŠ¨åˆ°åŸç‚¹
M4 ; å¯ç”¨æ¿€å…‰

; æ‰«æç¬¬ä¸€è¡Œ
G0 X-3 Y10 F6000 ; ç§»åŠ¨åˆ°è¡Œèµ·å§‹
<span class="highlight-error">G1 X0 Y10 S0 F3000</span> ; âŒ é”™è¯¯ï¼šä¸å‡ºå…‰å´ç”¨G1
<span class="highlight-g1">G1 X5 S80 F3000</span> ; å‡ºå…‰é›•åˆ»
<span class="highlight-g1">G1 X10 S0 F3000</span> ; âŒ é”™è¯¯ï¼šä¸å‡ºå…‰å´ç”¨G1
<span class="highlight-error">G1 X13 S0 F6000</span> ; âŒ é”™è¯¯ï¼šå¿«é€Ÿç§»åŠ¨å´ç”¨G1

; æ‰«æç¬¬äºŒè¡Œ
<span class="highlight-error">G1 X13 Y11 S0 F6000</span> ; âŒ é”™è¯¯ï¼šå¿«é€Ÿç§»åŠ¨å´ç”¨G1
<span class="highlight-error">G1 X10 Y11 S0 F3000</span> ; âŒ é”™è¯¯ï¼šä¸å‡ºå…‰å´ç”¨G1
<span class="highlight-g1">G1 X5 S80 F3000</span> ; å‡ºå…‰é›•åˆ»

M5 ; å…³é—­æ¿€å…‰
<span class="highlight-error">G1 S0 F6000</span> ; âŒ å¤šä½™æŒ‡ä»¤
G0 X0 Y0 ; è¿”å›åŸç‚¹
                </div>
            </div>
            
            <div>
                <div class="gcode-block">
                    <h4>ä¿®æ­£åï¼ˆæ­£ç¡®ï¼‰</h4>
; æ‰«æå›¾å±‚Gä»£ç ç¤ºä¾‹
G90 ; ç»å¯¹åæ ‡
G21 ; æ¯«ç±³å•ä½
G0 X0 Y0 F6000 ; ç§»åŠ¨åˆ°åŸç‚¹
M4 ; å¯ç”¨æ¿€å…‰

; æ‰«æç¬¬ä¸€è¡Œ
G0 X-3 Y10 F6000 ; ç§»åŠ¨åˆ°è¡Œèµ·å§‹
<span class="highlight-g0">G0 X0 Y10 F6000</span> ; âœ“ æ­£ç¡®ï¼šä¸å‡ºå…‰ç”¨G0
<span class="highlight-g1">G1 X5 S80 F3000</span> ; å‡ºå…‰é›•åˆ»
<span class="highlight-g0">G0 X10 Y10 F6000</span> ; âœ“ æ­£ç¡®ï¼šä¸å‡ºå…‰ç”¨G0
<span class="highlight-g0">G0 X13 Y10 F6000</span> ; âœ“ æ­£ç¡®ï¼šå¿«é€Ÿç§»åŠ¨ç”¨G0

; æ‰«æç¬¬äºŒè¡Œ
<span class="highlight-g0">G0 X13 Y11 F6000</span> ; âœ“ æ­£ç¡®ï¼šå¿«é€Ÿç§»åŠ¨ç”¨G0
<span class="highlight-g0">G0 X10 Y11 F6000</span> ; âœ“ æ­£ç¡®ï¼šä¸å‡ºå…‰ç”¨G0
<span class="highlight-g1">G1 X5 S80 F3000</span> ; å‡ºå…‰é›•åˆ»

M5 ; å…³é—­æ¿€å…‰
G0 X0 Y0 F6000 ; è¿”å›åŸç‚¹
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š Gä»£ç æŒ‡ä»¤è§„èŒƒ</h2>
        <table>
            <thead>
                <tr>
                    <th>æŒ‡ä»¤</th>
                    <th>ç”¨é€”</th>
                    <th>åŠŸç‡å‚æ•°</th>
                    <th>é€Ÿåº¦</th>
                    <th>ä½¿ç”¨åœºæ™¯</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="command-code">G0</span></td>
                    <td>å¿«é€Ÿç§»åŠ¨</td>
                    <td>âŒ ä¸éœ€è¦</td>
                    <td>å¿«é€Ÿç§»åŠ¨é€Ÿåº¦</td>
                    <td>ä¸å‡ºå…‰çš„ç§»åŠ¨ã€ç©ºç¨‹ç§»åŠ¨</td>
                </tr>
                <tr>
                    <td><span class="command-code">G1</span></td>
                    <td>ç›´çº¿æ’è¡¥</td>
                    <td>âœ… éœ€è¦Så‚æ•°</td>
                    <td>å·¥ä½œé€Ÿåº¦</td>
                    <td>å‡ºå…‰é›•åˆ»ã€æœ‰åŠŸç‡çš„ç§»åŠ¨</td>
                </tr>
                <tr>
                    <td><span class="command-code">M4</span></td>
                    <td>å¯ç”¨æ¿€å…‰ï¼ˆå¯å˜åŠŸç‡ï¼‰</td>
                    <td>âŒ ä¸éœ€è¦</td>
                    <td>âŒ ä¸éœ€è¦</td>
                    <td>æ‰«ææ¨¡å¼å¼€å§‹</td>
                </tr>
                <tr>
                    <td><span class="command-code">M5</span></td>
                    <td>å…³é—­æ¿€å…‰</td>
                    <td>âŒ ä¸éœ€è¦</td>
                    <td>âŒ ä¸éœ€è¦</td>
                    <td>æ‰«ææ¨¡å¼ç»“æŸ</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ ä¿®æ­£å¸¦æ¥çš„ä¼˜åŠ¿</h2>
        
        <div class="info-box">
            <h4>æ€§èƒ½ä¼˜åŠ¿</h4>
            <ul class="improvement-list">
                <li>G0æŒ‡ä»¤æ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼Œå‡å°‘ç©ºç¨‹æ—¶é—´</li>
                <li>æ¿€å…‰æ§åˆ¶å™¨èƒ½æ›´å¥½åœ°ä¼˜åŒ–ç§»åŠ¨è·¯å¾„</li>
                <li>å‡å°‘ä¸å¿…è¦çš„åŠŸç‡è®¾ç½®æŒ‡ä»¤</li>
            </ul>
        </div>

        <div class="info-box">
            <h4>å…¼å®¹æ€§ä¼˜åŠ¿</h4>
            <ul class="improvement-list">
                <li>ç¬¦åˆæ ‡å‡†Gä»£ç è§„èŒƒ</li>
                <li>æé«˜ä¸ä¸åŒæ¿€å…‰æ§åˆ¶å™¨çš„å…¼å®¹æ€§</li>
                <li>é¿å…æ„å¤–å‡ºå…‰çš„å®‰å…¨é£é™©</li>
            </ul>
        </div>

        <div class="info-box">
            <h4>ä»£ç è´¨é‡ä¼˜åŠ¿</h4>
            <ul class="improvement-list">
                <li>Gä»£ç æ›´åŠ æ¸…æ™°æ˜“è¯»</li>
                <li>å‡å°‘å†—ä½™æŒ‡ä»¤</li>
                <li>é€»è¾‘æ›´åŠ åˆç†</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚</h2>
        
        <h3>ä¿®æ”¹çš„æ ¸å¿ƒå‡½æ•°ï¼š</h3>
        <div class="gcode-block">
<h4>flushå‡½æ•°ä¿®æ­£</h4>
function flush(ignoreTravel: boolean = false) {
  // æ ¹æ®åŠŸç‡å†³å®šä½¿ç”¨G0è¿˜æ˜¯G1æŒ‡ä»¤
  const isRapidMove = power1 === 0;
  let cmd = isRapidMove ? "G0 " : "G1 ";
  
  // æ·»åŠ åæ ‡å‚æ•°
  if (x0 !== x1 && x1 != null) {
    cmd += `X${roundCoord(x1)}`;
    x0 = x1;
  }
  if (y0 !== y1 && y1 != null) {
    cmd += `Y${roundCoord(y1)}`;
    y0 = y1;
  }
  
  // åªæœ‰G1æŒ‡ä»¤éœ€è¦åŠŸç‡å‚æ•°
  if (!isRapidMove) {
    cmd += `S${power1}`;
  }
  
  // æ·»åŠ é€Ÿåº¦å‚æ•°
  if (speed0 !== speed1) {
    cmd += `F${speed1}`;
    speed0 = speed1;
  }
  
  gcode.push(cmd);
}
        </div>

        <h3>å…³é”®æ”¹è¿›ç‚¹ï¼š</h3>
        <ul class="improvement-list">
            <li><strong>æ™ºèƒ½æŒ‡ä»¤é€‰æ‹©ï¼š</strong>æ ¹æ®power1å€¼è‡ªåŠ¨é€‰æ‹©G0æˆ–G1</li>
            <li><strong>åŠŸç‡å‚æ•°ä¼˜åŒ–ï¼š</strong>G0æŒ‡ä»¤ä¸åŒ…å«Så‚æ•°</li>
            <li><strong>ä»£ç ç®€åŒ–ï¼š</strong>ç§»é™¤ç»“å°¾çš„å¤šä½™G1 S0æŒ‡ä»¤</li>
            <li><strong>é€»è¾‘æ¸…æ™°ï¼š</strong>å‡ºå…‰ä¸ä¸å‡ºå…‰çš„ç§»åŠ¨æ˜ç¡®åŒºåˆ†</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>âœ… éªŒè¯ç»“æœ</h2>
        
        <div class="success-box">
            <h4>ä¿®æ­£éªŒè¯é€šè¿‡</h4>
            <p>ç»è¿‡ä¿®æ­£åï¼Œæ‰«æå›¾å±‚ç”Ÿæˆçš„Gä»£ç å®Œå…¨ç¬¦åˆæ ‡å‡†è§„èŒƒï¼š</p>
            <ul class="improvement-list">
                <li>æ‰€æœ‰ä¸å‡ºå…‰ç§»åŠ¨ä½¿ç”¨G0æŒ‡ä»¤</li>
                <li>æ‰€æœ‰å‡ºå…‰ç§»åŠ¨ä½¿ç”¨G1æŒ‡ä»¤</li>
                <li>G0æŒ‡ä»¤ä¸åŒ…å«åŠŸç‡å‚æ•°</li>
                <li>G1æŒ‡ä»¤åŒ…å«æ­£ç¡®çš„åŠŸç‡å‚æ•°</li>
                <li>ç§»é™¤äº†å†—ä½™çš„æŒ‡ä»¤</li>
            </ul>
        </div>

        <div class="warning-box">
            <h4>æ³¨æ„äº‹é¡¹</h4>
            <ul>
                <li>æ­¤ä¿®æ­£ä»…å½±å“æ‰«æå›¾å±‚çš„Gä»£ç ç”Ÿæˆ</li>
                <li>é›•åˆ»å›¾å±‚çš„Gä»£ç ç”Ÿæˆé€»è¾‘ä¿æŒä¸å˜</li>
                <li>å»ºè®®åœ¨å®é™…ä½¿ç”¨å‰è¿›è¡Œæµ‹è¯•éªŒè¯</li>
            </ul>
        </div>
    </div>
</body>
</html>
